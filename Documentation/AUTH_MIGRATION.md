# üîÑ –ú—ñ–≥—Ä–∞—Ü—ñ—è –∑ authService –Ω–∞ useAuth

## üìã –û–≥–ª—è–¥ –∑–º—ñ–Ω

–¶–µ–π –¥–æ–∫—É–º–µ–Ω—Ç –æ–ø–∏—Å—É—î –ø–æ–≤–Ω—É –º—ñ–≥—Ä–∞—Ü—ñ—é –∑ `authService` –Ω–∞ `useAuth` –ø—ñ–¥—Ö—ñ–¥ –¥–ª—è —Ü–µ–Ω—Ç—Ä–∞–ª—ñ–∑–æ–≤–∞–Ω–æ–≥–æ —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—î—é –≤ –¥–æ–¥–∞—Ç–∫—É.

## üéØ –ü—Ä–∏—á–∏–Ω–∏ –º—ñ–≥—Ä–∞—Ü—ñ—ó

### **–ü—Ä–æ–±–ª–µ–º–∏ –∑ authService:**
- ‚ùå **–ù–µ —Ä–µ–∞–∫—Ç–∏–≤–Ω–∏–π** - –∑–º—ñ–Ω–∏ –Ω–µ –≤—ñ–¥–æ–±—Ä–∞–∂–∞—é—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ
- ‚ùå **–ù–µ–º–∞—î —Ü–µ–Ω—Ç—Ä–∞–ª—ñ–∑–æ–≤–∞–Ω–æ–≥–æ —Å—Ç–∞–Ω—É** - –∫–æ–∂–µ–Ω –∫–æ–º–ø–æ–Ω–µ–Ω—Ç —á–∏—Ç–∞—î localStorage –æ–∫—Ä–µ–º–æ
- ‚ùå **–ú–æ–∂–ª–∏–≤—ñ race conditions** - —Ä—ñ–∑–Ω—ñ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏ –º–æ–∂—É—Ç—å –º–∞—Ç–∏ —Ä—ñ–∑–Ω–∏–π —Å—Ç–∞–Ω
- ‚ùå **–°–∫–ª–∞–¥–Ω—ñ—Å—Ç—å —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—ó** - –ø–æ—Ç—Ä—ñ–±–Ω–æ –≤—Ä—É—á–Ω—É –æ–Ω–æ–≤–ª—é–≤–∞—Ç–∏ –≤—Å—ñ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏

### **–ü–µ—Ä–µ–≤–∞–≥–∏ useAuth:**
- ‚úÖ **–†–µ–∞–∫—Ç–∏–≤–Ω–∏–π** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è –≤—Å—ñ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ñ–≤
- ‚úÖ **–¶–µ–Ω—Ç—Ä–∞–ª—ñ–∑–æ–≤–∞–Ω–∏–π —Å—Ç–∞–Ω** - –æ–¥–∏–Ω –¥–∂–µ—Ä–µ–ª–æ —ñ—Å—Ç–∏–Ω–∏
- ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∞ —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—è** - –∑–º—ñ–Ω–∏ –≤—ñ–¥—Ä–∞–∑—É –≤—ñ–¥–æ–±—Ä–∞–∂–∞—é—Ç—å—Å—è
- ‚úÖ **–¢–∏–ø–æ–±–µ–∑–ø–µ–∫–∞** - TypeScript –ø—ñ–¥—Ç—Ä–∏–º–∫–∞
- ‚úÖ **–õ–µ–≥—à–µ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è** - –º–æ–∂–Ω–∞ –º–æ–∫–∞—Ç–∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç

## üîß –Ø–∫ –ø—Ä–∞—Ü—é—î useAuth

### **–ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞:**
```typescript
// AuthContext —Å—Ç–≤–æ—Ä—é—î —Ü–µ–Ω—Ç—Ä–∞–ª—ñ–∑–æ–≤–∞–Ω–∏–π —Å—Ç–∞–Ω
const AuthContext = createContext<AuthContextType>();

// AuthProvider –æ–±–≥–æ—Ä—Ç–∞—î –¥–æ–¥–∞—Ç–æ–∫ —ñ –Ω–∞–¥–∞—î —Å—Ç–∞–Ω
<AuthProvider>
  <App />
</AuthProvider>

// useAuth —Ö—É–∫ –Ω–∞–¥–∞—î –¥–æ—Å—Ç—É–ø –¥–æ —Å—Ç–∞–Ω—É
const { user, isAuthenticated, isAdmin, login, logout } = useAuth();
```

### **–ü–æ—Å–ª—ñ–¥–æ–≤–Ω—ñ—Å—Ç—å —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—ó:**
1. **AuthProvider** —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑—É—î—Ç—å—Å—è –ø—Ä–∏ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—ñ –¥–æ–¥–∞—Ç–∫—É
2. **useEffect** —á–∏—Ç–∞—î –¥–∞–Ω—ñ –∑ localStorage —á–µ—Ä–µ–∑ authService
3. **setState** –æ–Ω–æ–≤–ª—é—î React state
4. **–í—Å—ñ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏** –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –ø–µ—Ä–µ—Ä–µ–Ω–¥–µ—Ä—é—Ç—å—Å—è –∑ –Ω–æ–≤–∏–º–∏ –¥–∞–Ω–∏–º–∏

## üìù –ü—Ä–∏–∫–ª–∞–¥–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è

### **–û—Ç—Ä–∏–º–∞–Ω–Ω—è –¥–∞–Ω–∏—Ö –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞:**
```typescript
// –°—Ç–∞—Ä–∏–π –ø—ñ–¥—Ö—ñ–¥ (authService):
const currentUser = authService.getStoredUser();
const isAuthenticated = authService.isAuthenticated();
const isAdmin = authService.isAdmin();

// –ù–æ–≤–∏–π –ø—ñ–¥—Ö—ñ–¥ (useAuth):
const { user, isAuthenticated, isAdmin } = useAuth();
```

### **–ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—ó:**
```typescript
// –£–º–æ–≤–Ω–∏–π —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥
{isAuthenticated ? (
  <UserDashboard />
) : (
  <LoginPrompt />
)}

// –ó–∞—Ö–∏—Å—Ç —Ä–æ—É—Ç—ñ–≤
{isAuthenticated && <ProtectedComponent />}
```

### **–£–º–æ–≤–Ω–∏–π —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ –∫–Ω–æ–ø–æ–∫:**
```typescript
{/* –ö–Ω–æ–ø–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–∞ –≤—Å—ñ–º */}
<Button onClick={handleShare}>Share</Button>

{/* –ö–Ω–æ–ø–∫–∞ —Ç—ñ–ª—å–∫–∏ –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–∏—Ö */}
{isAuthenticated && (
  <Button onClick={handleFavorite}>Add to Favorites</Button>
)}

{/* –ö–Ω–æ–ø–∫–∞ —Ç—ñ–ª—å–∫–∏ –¥–ª—è –≤–ª–∞—Å–Ω–∏–∫–∞ –∞–±–æ –∞–¥–º—ñ–Ω–∞ */}
{(isOwner || isAdmin) && (
  <Button onClick={handleEdit}>Edit</Button>
)}
```

### **–í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è login/logout:**
```typescript
// –û—Ç—Ä–∏–º—É—î–º–æ —Ñ—É–Ω–∫—Ü—ñ—ó –∑ useAuth
const { login, logout } = useAuth();

// Login
const handleLogin = async (credentials) => {
  const response = await authService.login(credentials);
  login(response); // –û–Ω–æ–≤–ª—é—î –∫–æ–Ω—Ç–µ–∫—Å—Ç
};

// Logout
const handleLogout = () => {
  logout(); // –û—á–∏—â–∞—î –∫–æ–Ω—Ç–µ–∫—Å—Ç —Ç–∞ localStorage
};
```

## üîÑ –ó–º—ñ–Ω–µ–Ω—ñ —Ñ–∞–π–ª–∏

### **–ü–æ–≤–Ω—ñ—Å—Ç—é –º—ñ–≥—Ä–æ–≤–∞–Ω—ñ:**
- ‚úÖ `PropertyDetailPage.tsx` - –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—ó —Ç–∞ —É–º–æ–≤–Ω–∏–π —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥
- ‚úÖ `PropertyCard.tsx` - –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—ó –¥–ª—è —ñ–∫–æ–Ω–æ–∫
- ‚úÖ `Header.tsx` - –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è –º–µ–Ω—é –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
- ‚úÖ `ProtectedRoute.tsx` - –∑–∞—Ö–∏—Å—Ç —Ä–æ—É—Ç—ñ–≤
- ‚úÖ `PublicRoute.tsx` - –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–Ω—è –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–∏—Ö –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤
- ‚úÖ `EditPropertyPage.tsx` - –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø—É
- ‚úÖ `CreatePropertyPage.tsx` - –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—ó
- ‚úÖ `PropertiesPage.tsx` - –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—ó
- ‚úÖ `ProfilePage.tsx` - —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –ø—Ä–æ—Ñ—ñ–ª–µ–º —Ç–∞ logout

### **–ß–∞—Å—Ç–∫–æ–≤–æ –º—ñ–≥—Ä–æ–≤–∞–Ω—ñ (API –≤–∏–∫–ª–∏–∫–∏ –∑–∞–ª–∏—à–∞—é—Ç—å—Å—è –≤ authService):**
- ‚úÖ `LoginPage.tsx` - –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î useAuth –¥–ª—è login, authService –¥–ª—è API
- ‚úÖ `RegisterPage.tsx` - –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î useAuth –¥–ª—è login, authService –¥–ª—è API

## üèóÔ∏è –§—ñ–Ω–∞–ª—å–Ω–∞ –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞

### **–†–æ–∑–¥—ñ–ª–µ–Ω–Ω—è –≤—ñ–¥–ø–æ–≤—ñ–¥–∞–ª—å–Ω–æ—Å—Ç—ñ:**

```typescript
// AuthContext - —Ü–µ–Ω—Ç—Ä–∞–ª—ñ–∑–æ–≤–∞–Ω–∏–π —Å—Ç–∞–Ω
const { user, isAuthenticated, isAdmin, login, logout } = useAuth();

// authService - —Ç—ñ–ª—å–∫–∏ API –æ–ø–µ—Ä–∞—Ü—ñ—ó
const response = await authService.login(credentials);
login(response); // –æ–Ω–æ–≤–ª—é—î –∫–æ–Ω—Ç–µ–∫—Å—Ç
```

### **–ü–µ—Ä–µ–≤–∞–≥–∏ –Ω–æ–≤–æ—ó –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∏:**
- ‚úÖ **–ß—ñ—Ç–∫–µ —Ä–æ–∑–¥—ñ–ª–µ–Ω–Ω—è –≤—ñ–¥–ø–æ–≤—ñ–¥–∞–ª—å–Ω–æ—Å—Ç—ñ**
- ‚úÖ **–†–µ–∞–∫—Ç–∏–≤–Ω–∏–π UI**
- ‚úÖ **–õ–µ–≥—à–µ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è**
- ‚úÖ **–ö—Ä–∞—â–∏–π developer experience**

## üöÄ –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –≤ –Ω–æ–≤–∏—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö

### **–®–∞–±–ª–æ–Ω –¥–ª—è –Ω–æ–≤–∏—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ñ–≤:**
```typescript
import { useAuth } from "../contexts/AuthContext";

export const MyComponent: React.FC = () => {
  // –û—Ç—Ä–∏–º—É—î–º–æ –¥–∞–Ω—ñ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—ó
  const { user, isAuthenticated, isAdmin } = useAuth();
  
  // –£–º–æ–≤–Ω–∏–π —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥
  if (!isAuthenticated) {
    return <LoginPrompt />;
  }
  
  return (
    <div>
      <h1>Welcome, {user?.fullName}!</h1>
      {isAdmin && <AdminPanel />}
    </div>
  );
};
```

## ‚ö†Ô∏è –í–∞–∂–ª–∏–≤—ñ –∑–∞—É–≤–∞–∂–µ–Ω–Ω—è

1. **authService –∑–∞–ª–∏—à–∞—î—Ç—å—Å—è** –¥–ª—è API –≤–∏–∫–ª–∏–∫—ñ–≤ (login, register, refreshToken)
2. **useAuth –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è** –¥–ª—è –¥–æ—Å—Ç—É–ø—É –¥–æ —Å—Ç–∞–Ω—É –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—ó
3. **–í—Å—ñ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏** —Ç–µ–ø–µ—Ä –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –æ–Ω–æ–≤–ª—é—é—Ç—å—Å—è –ø—Ä–∏ –∑–º—ñ–Ω—ñ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—ó
4. **–¢–∏–ø–æ–±–µ–∑–ø–µ–∫–∞** –∑–∞–±–µ–∑–ø–µ—á—É—î—Ç—å—Å—è TypeScript —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞–º–∏

## üîç –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è

–î–ª—è —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ñ–≤ –∑ useAuth:
```typescript
// –ú–æ–∫–∞—î–º–æ AuthContext
const mockAuthContext = {
  user: mockUser,
  isAuthenticated: true,
  isAdmin: false,
  login: jest.fn(),
  logout: jest.fn(),
  updateUser: jest.fn(),
  loading: false,
};

// –û–±–≥–æ—Ä—Ç–∞—î–º–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –≤ AuthProvider –∑ –º–æ–∫–æ–≤–∞–Ω–∏–º–∏ –¥–∞–Ω–∏–º–∏
<AuthProvider value={mockAuthContext}>
  <MyComponent />
</AuthProvider>
```
